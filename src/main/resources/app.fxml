<?xml version="1.0" encoding="UTF-8"?>

<?import com.example.renderer.view.component.InputGroup?>
<?import com.example.renderer.view.component.Object3DCellFactory?>
<?import com.example.renderer.view.control.CloseButton?>
<?import com.example.renderer.view.control.Point3DSpinner?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ContextMenu?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<HBox fx:id="root" alignment="TOP_CENTER" onMouseClicked="#resetFocus" prefHeight="480" prefWidth="850" styleClass="root" xmlns="http://javafx.com/javafx/8.0.999-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.renderer.controller.UIController">
    <children>
        <StackPane alignment="TOP_LEFT" onMouseClicked="#updateModel" prefHeight="480.0" prefWidth="640.0">
            <children>
                <StackPane>
                    <ImageView fx:id="image" fitHeight="480.0" fitWidth="640.0" onMouseClicked="#printPixelPosition" />
                    <ProgressIndicator fx:id="loader" maxHeight="200.0" maxWidth="200.0" visible="false" />
                </StackPane>
                <HBox fx:id="errorBox" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="90.0" prefWidth="300.0" spacing="10.0" styleClass="error-notification" visible="false">
                    <StackPane.margin>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </StackPane.margin>
                    <Label fx:id="errorBoxText" styleClass="error-text" wrapText="true" HBox.hgrow="ALWAYS" />
                    <CloseButton onAction="#closeErrorBox" />
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </HBox>
            </children>
        </StackPane>
        <VBox fx:id="sidebar" alignment="TOP_CENTER" maxWidth="-Infinity" minWidth="-Infinity" prefWidth="240" spacing="15.0">
            <children>
                <InputGroup spacing="2" title="Camera controls">
                    <children>
                        <AnchorPane>
                            <Label text="FOV:" />
                            <Label fx:id="fovLabel" AnchorPane.rightAnchor="0" />
                        </AnchorPane>
                        <Slider fx:id="fovSlider" blockIncrement="7.5" majorTickUnit="15.0" max="90" minorTickCount="1" showTickMarks="true" snapToTicks="true" />
                        <Point3DSpinner fx:id="cameraOriginSpinner" />
                    </children>
                </InputGroup>
                <InputGroup fx:id="sceneControls" title="Scene controls">
                    <children>
                    <VBox>
                    <children>
                        <HBox>
                            <children>
                                <Button fx:id="importBtn" mnemonicParsing="false" onAction="#importScene" text="Import" />
                                <Button fx:id="exportBtn" mnemonicParsing="false" onAction="#exportScene" text="Export " />
                            </children>
                        </HBox>
                                <ListView fx:id="objectList" prefHeight="100">
                                    <cellFactory>
                                        <Object3DCellFactory />
                                    </cellFactory>
                                    <contextMenu>
                                        <ContextMenu>
                                            <items>
                                                <SeparatorMenuItem mnemonicParsing="false" />
                                                <MenuItem onAction="#editObject" text="Edit" />
                                                <MenuItem onAction="#deleteObject" text="Delete" />
                                            </items>
                                        </ContextMenu>
                                    </contextMenu>
                                </ListView>
                    </children>
                    </VBox>
                        <Point3DSpinner fx:id="objectPosition" disable="true" />
                        <MenuButton fx:id="newObjectBtn" mnemonicParsing="false" popupSide="LEFT" text="New object">
                            <items>
                                <MenuItem fx:id="sphereItem" mnemonicParsing="false" onAction="#newObject" text="Sphere" />
                                <MenuItem fx:id="triangleItem" mnemonicParsing="false" onAction="#newObject" text="Triangle" />
                                <MenuItem fx:id="meshItem" mnemonicParsing="false" onAction="#newObject" text="Mesh" />
                                <MenuItem fx:id="lightSourceItem" mnemonicParsing="false" onAction="#newObject" text="Light Source" />
                            </items>
                        </MenuButton>
                        <CheckBox fx:id="aaCheckBox" mnemonicParsing="false" text="Enable antialiasing" />
                    </children>
                </InputGroup>
                <Button fx:id="saveBtn" mnemonicParsing="false" onAction="#saveImage" text="Save image" />
            </children>
            <padding>
                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
            </padding>
        </VBox>
    </children>
</HBox>
